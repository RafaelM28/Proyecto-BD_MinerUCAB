<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ver Detalle Solicitud de Compra - MinerUCAB</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ver_solicitud_compra_confirmada.css') }}">
</head>
<body>
    <header class="header">
        <div class="logo">MINERUCAB</div>
        <div class="nav-buttons">
            <img class="img-proyectos" src="/static/images/image 4.svg" />
            <div class="botones">
                <button class="botones1" onclick="location.href='lista_proyectos_config';">Proyectos</button>
            </div>
            <button class="botones2">Perfil</button>
        </div>
    </header>

    <div class="main-container">
        <div class="sidebar">
            <ul>
                <div class="list-item">
                    <img width="24px" class="icon" src="/static/images/image 2.svg" alt="" />
                    <span class="text1">Crear perfil</span>
                </div>

                <div class="list-item">
                    <a href="{{ url_for('home')}}">
                        <img width="45px" class="icon1" src="/static/images/image 5.svg" alt="" />
                    </a>
                    <span class="text">Inicio</span>
                </div>

                <div class="list-item">
                    <img width="35px" class="icon" src="/static/images/image 7.svg" alt="" />
                    <span class="text">Personal</span>
                </div>

                <ul class="sub-listas">
                    <a href="{{ url_for('lista_empleados')}}">
                        <li class="li" href="#">Empleados</li>
                    </a>
                    <a href="{{ url_for('lista_recursos')}}">
                        <li class="li2" href="#">Recursos</li>
                    </a>
                </ul>

                <div class="list-item2">
                    <img width="32px" class="icon" src="/static/images/image 16.svg" alt="" />
                    <span class="text2">Alianzas</span>
                </div>
                
                <ul class="sub-listas">
                    <a href="{{ url_for('lista_aliados') }}">
                        <li class="li" href="#">Aliados</li>
                    </a>
                    <a href="{{ url_for('lista_solicitudes') }}">
                        <li class="li" href="#">Solicitudes</li>
                    </a>
                    <a href="#">
                        <li class="li2" href="#">Pagos Compra</li>
                    </a>
                </ul>
                
                <div class="list-item2">
                    <img width="30px" class="icon" src="/static/images/image 14.svg" alt="" />
                    <span class="text">Almacen</span>
                </div>

                <ul class="sub-listas">
                    <a href="{{ url_for('lista_minerales')}}">
                        <li class="li" href="#">Minerales</li>
                    </a>
                    <a href="{{ url_for('lista_inventario')}}">
                        <li class="li2" href="#">Inventario</li>
                    </a>
                </ul>

                <div class="list-item2">
                    <img width="30px" class="icon" src="/static/images/image 18.svg" alt="" />
                    <span class="text">Ventas</span>
                </div>

                <ul class="sub-listas">
                    <a href="{{ url_for('lista_clientes')}}">
                        <li class="li" href="#">Clientes</li>
                    </a>
                    <a href="{{ url_for('lista_pedidos_venta')}}">
                        <li class="li" href="#">Pedidos</li>
                    </a>
                    <a href="#">
                        <li class="li2" href="#">Pagos de Venta</li>
                    </a>
                </ul>

                <div class="list-item2">
                    <img width="30px" class="icon" src="/static/images/image 20.svg" alt="" />
                    <span class="text">Seguridad</span>
                </div>

                <ul class="sub-listas">
                    <a href="{{ url_for('lista_usuarios')}}">
                        <li class="li" href="#">Usuarios</li>
                    </a>
                    <a href="{{ url_for('lista_roles')}}">
                        <li class="li" href="#">Roles</li>
                    </a>
                    <a href="{{ url_for('lista_privilegios')}}">
                        <li class="li2" href="#">Privilegios</li>
                    </a>
                </ul>

            </ul>
        </div>

        <main class="main-content">
            <header>
                <h2>Solicitud de Compra</h2>
            </header>
            <form class="solicitud-form" action="{{ url_for('register_pago') }}" method="POST">  <!-- Adjust action to your backend endpoint -->
                <div class="form-group">
                    <label for="fecha-emision">Fecha Emisión:</label>
                    <input type="date" id="fecha-emision" name="fecha-emision" value="{{ solicitud[0] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="numero-orden">Número de orden:</label>
                    <input type="text" id="numero-orden" name="numero-orden" value="{{ solicitud[1] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="estatus">Estatus:</label>
                    <input type="text" id="estatus" name="estatus" value="{{ solicitud[2] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="razon-social">Razón Social:</label>
                    <!-- Input visible para el usuario, mostrando solicitud[4] -->
                    <input type="text" id="razon-social-display" value="{{ solicitud[4] }}" readonly>
                    <!-- Input oculto que realmente se enviará al servidor, conteniendo solicitud[3] -->
                    <input type="hidden" id="razon-social" name="razon-social" value="{{ solicitud[3] }}">
                </div>
                <div class="form-group">
                    <label for="rif">RIF:</label>
                    <input type="text" id="rif" name="rif" value="{{ solicitud[5] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="correo">Correo:</label>
                    <input type="email" id="correo" name="correo" value="{{ solicitud[6] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="direccion">Dirección:</label>
                    <input type="text" id="direccion" name="direccion" value="{{ solicitud[7] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="telefono">Teléfono:</label>
                    <input type="text" id="telefono" name="telefono" value="{{ solicitud[8] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="representante">Representante:</label>
                    <input type="text" id="representante" name="representante" value="{{ solicitud[9] }}" readonly>
                </div>
                <div class="form-group">
                    <label for="metodo-pago">Método de Pago:</label>
                    <select id="metodo-pago" name="metodo-pago" required>
                        <option value="">Seleccione un método de pago</option>
                        {% for metodo in metodos %}
                        <option value="{{ metodo[0] }}|{{ metodo[2] }}">{{ metodo[1] }} ||| {{ metodo[2] }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="fecha-pago">Fecha Pago:</label>
                    <input type="date" id="fecha-pago" name="fecha-pago" required>
                </div>
                <div class="form-group">
                    <label for="pedido-asociado">Pedido Asociado:</label>
                    <input type="text" id="pedido-asociado" name="pedido-asociado" value="{{ solicitud[11] }}" readonly>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th>Precio Unit.</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for detalle in detalles %}
                            <tr>
                                <td>{{ detalle[0] }}</td>
                                <td>{{ detalle[1] }}</td>
                                <td>{{ detalle[2] }}</td>
                                <td>{{ detalle[3] }}</td>
                                <td>{{ detalle[3] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="4" class="total">TOTAL</td>
                                <td>{{ solicitud[12] }}</td>
                                <input type="hidden" name="total" value="{{ solicitud[12] }}" />
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="form-group">
                    <button type="submit">Pagar</button>
                </div>
            </form>
        </main>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
            <script>alert("{{ message }}");</script>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
</body>
</html>
